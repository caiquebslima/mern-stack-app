(this["webpackJsonpmy-webpack-project"]=this["webpackJsonpmy-webpack-project"]||[]).push([[0],{93:function(e,t,r){},94:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(44),c=r(4),o=r(10),i=r(3),u=r(8),l=r(16),j=r.n(l),d="/api/users/",b=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(d,t);case 2:return(r=e.sent).data&&localStorage.setItem("user",JSON.stringify(r.data)),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(d+"login",t);case 2:return(r=e.sent).data&&localStorage.setItem("user",JSON.stringify(r.data)),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={register:b,logout:f,login:p},g=JSON.parse(localStorage.getItem("user")),m={user:g||null,isError:!1,isSuccess:!1,isLoading:!1,message:""},h=Object(o.b)("auth/register",function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.register(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),x=Object(o.b)("auth/login",function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.login(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),v=Object(o.b)("auth/logout",Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.logout();case 2:case"end":return e.stop()}}),e)})))),w=Object(o.c)({name:"auth",initialState:m,reducers:{reset:function(e){e.isLoading=!1,e.isError=!1,e.isSuccess=!1,e.message=""}},extraReducers:function(e){e.addCase(h.pending,(function(e){e.isLoading=!0})).addCase(h.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.user=t.payload})).addCase(h.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=e.payload,e.user=null})).addCase(x.pending,(function(e){e.isLoading=!0})).addCase(x.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.user=t.payload})).addCase(x.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=e.payload,e.user=null})).addCase(v.fulfilled,(function(e){e.user=null}))}}),S=w.actions.reset,y=w.reducer,N="/api/goals/",C=JSON.parse(localStorage.getItem("user")),L={headers:{Authorization:"Bearer ".concat(C.token)}},k=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(N,L);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Bearer ".concat(r)}},e.next=3,j.a.post(N,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"Bearer ".concat(r)}},e.next=3,j.a.delete(N+t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),G={getGoals:k,createGoal:E,deleteGoal:F},A={goals:[],isError:!1,isSuccess:!1,isLoading:!1,message:""},I=Object(o.b)("goals/getAll",function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.getGoals();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(n));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),D=Object(o.b)("goals/create",function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.getState().auth.user.token,e.next=4,G.createGoal(t,n);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(a));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),J=Object(o.b)("goals/delete",function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.getState().auth.user.token,e.next=4,G.deleteGoal(t,n);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),e.abrupt("return",r.rejectWithValue(a));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),W=Object(o.c)({name:"goals",initialState:A,reducers:{reset:function(e){return A}},extraReducers:function(e){e.addCase(D.pending,(function(e){e.isLoading=!0})).addCase(D.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals.push(t.payload)})).addCase(D.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload})).addCase(I.pending,(function(e){e.isLoading=!0})).addCase(I.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals=t.payload})).addCase(I.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload,e.goals=[]})).addCase(J.pending,(function(e){e.isLoading=!0})).addCase(J.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.goals=e.goals.filter((function(e){return e._id!==t.payload._id}))})).addCase(J.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.message=t.payload,e.goals=[]}))}}),B=W.actions.reset,V=W.reducer,R=Object(o.a)({reducer:{auth:y,goals:V}}),_=r(11),z=r(2),P=r(14),T=r(1),M=function(){var e=Object(z.f)(),t=Object(c.b)(),r=Object(c.c)((function(e){return e.auth})).user;return Object(T.jsxs)("header",{className:"header",children:[Object(T.jsx)("div",{className:"logo",children:Object(T.jsx)(_.b,{to:"/",children:"GoalSetter"})}),r?Object(T.jsx)("ul",{children:Object(T.jsx)("li",{children:Object(T.jsxs)("button",{className:"btn",onClick:function(){t(v()),t(S()),e("/login")},children:[Object(T.jsx)(P.b,{})," Logout"]})})}):Object(T.jsxs)("ul",{children:[Object(T.jsx)("li",{children:Object(T.jsxs)(_.b,{to:"/login",children:[Object(T.jsx)(P.a,{})," Login"]})}),Object(T.jsx)("li",{children:Object(T.jsxs)(_.b,{to:"/register",children:[Object(T.jsx)(P.c,{})," Register"]})})]})]})},X=r(12),Y=function(){return Object(T.jsx)("div",{className:"loadingSpinnerContainer",children:Object(T.jsx)("div",{className:"loadingSpinner"})})},q=r(7),H=function(){var e=Object(n.useState)(""),t=Object(q.a)(e,2),r=t[0],a=t[1],s=Object(c.b)();return Object(T.jsx)("section",{className:"form",children:Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(D({text:r})),a("")},children:[Object(T.jsxs)("div",{className:"form-group",children:[Object(T.jsx)("label",{htmlFor:"text",children:"Goal"}),Object(T.jsx)("input",{type:"text",name:"goal",id:"goal",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("button",{className:"btn btn-block",type:"submit",children:"Add goal"})})]})})},K=function(e){var t=e.goal,r=Object(c.b)();return Object(T.jsxs)("div",{className:"goal",children:[Object(T.jsx)("div",{children:new Date(t.createdAt).toLocaleString("pt-br")}),Object(T.jsx)("h2",{children:t.text}),Object(T.jsx)("button",{onClick:function(){return r(J(t._id))},className:"close",children:"X"})]})},Q=function(){var e=Object(z.f)(),t=Object(c.b)(),r=Object(c.c)((function(e){return e.auth})).user,a=Object(c.c)((function(e){return e.goals})),s=a.goals,o=a.isLoading,i=a.isError,u=a.message;return Object(n.useEffect)((function(){i&&u&&X.toast.error(u)}),[s,i,u,e,t]),Object(n.useEffect)((function(){return i&&u&&console.log(u),r||e("/login"),t(I()),function(){t(B())}}),[r,e,i,u,t]),o?Object(T.jsx)(Y,{}):Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("section",{className:"heading",children:[Object(T.jsxs)("h1",{children:["Welcome, ",r&&r.name]}),Object(T.jsx)("p",{children:"Goals Dashboard"}),Object(T.jsx)(H,{}),Object(T.jsx)("section",{className:"content",children:s.length>0?Object(T.jsx)("div",{className:"goals",children:s.map((function(e){return Object(T.jsx)(K,{goal:e},e._id)}))}):Object(T.jsx)("h3",{children:"You have not set any goals"})})]})})},U=r(19),Z=r(13),$=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(q.a)(e,2),r=t[0],a=t[1],s=r.email,o=r.password,i=Object(z.f)(),u=Object(c.b)(),l=Object(c.c)((function(e){return e.auth})),j=l.user,d=l.isLoading,b=l.isError,p=l.isSuccess,f=l.message;Object(n.useEffect)((function(){b&&f&&X.toast.error(f),(p||j)&&i("/"),u(S())}),[j,b,p,f,i,u]);var O=function(e){a((function(t){return Object(Z.a)(Object(Z.a)({},t),{},Object(U.a)({},e.target.name,e.target.value))}))};return d?Object(T.jsx)(Y,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("section",{className:"heading",children:[Object(T.jsxs)("h1",{children:[Object(T.jsx)(P.a,{})," "]}),Object(T.jsx)("p",{children:"Login"})]}),Object(T.jsx)("section",{className:"form",children:Object(T.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(x({email:s,password:o}))},children:[Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"text",name:"email",id:"email",value:s,placeholder:"Enter your email",onChange:O})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",value:o,placeholder:"Enter password",onChange:O})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("button",{type:"submit",className:"btn btn-block",children:"Login"})})]})})]})},ee=function(){var e=Object(n.useState)({name:"",email:"",password:"",password2:""}),t=Object(q.a)(e,2),r=t[0],a=t[1],s=r.name,o=r.email,i=r.password,u=r.password2,l=Object(z.f)(),j=Object(c.b)(),d=Object(c.c)((function(e){return e.auth})),b=d.user,p=d.isLoading,f=d.isError,O=d.isSuccess,g=d.message;Object(n.useEffect)((function(){f&&X.toast.error(g),(O||b)&&l("/"),j(S())}),[b,f,O,g,l,j]);var m=function(e){a((function(t){return Object(Z.a)(Object(Z.a)({},t),{},Object(U.a)({},e.target.name,e.target.value))}))};return p?Object(T.jsx)(Y,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("section",{className:"heading",children:[Object(T.jsxs)("h1",{children:[Object(T.jsx)(P.c,{})," "]}),Object(T.jsx)("p",{children:"Create an Account"})]}),Object(T.jsx)("section",{className:"form",children:Object(T.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),i!==u)?X.toast.error("Passwords do not match"):j(h({name:s,email:o,password:i}))},children:[Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"text",name:"name",id:"name",value:s,placeholder:"Enter your name",onChange:m})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"text",name:"email",id:"email",value:o,placeholder:"Enter your email",onChange:m})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",value:i,placeholder:"Enter password",onChange:m})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("input",{className:"form-control",type:"password",name:"password2",id:"password2",value:u,placeholder:"Confirm password",onChange:m})}),Object(T.jsx)("div",{className:"form-group",children:Object(T.jsx)("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})};r(92);var te=function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(_.a,{children:Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)(M,{}),Object(T.jsxs)(z.c,{children:[Object(T.jsx)(z.a,{path:"/",element:Object(T.jsx)(Q,{})}),Object(T.jsx)(z.a,{path:"/login",element:Object(T.jsx)($,{})}),Object(T.jsx)(z.a,{path:"/register",element:Object(T.jsx)(ee,{})})]})]})}),Object(T.jsx)(X.ToastContainer,{})]})},re=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,95)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))},ne=(r(93),document.getElementById("root"));Object(s.createRoot)(ne).render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(c.a,{store:R,children:Object(T.jsx)(te,{})})})),re()}},[[94,1,2]]]);
//# sourceMappingURL=main.19bb9f0f.chunk.js.map